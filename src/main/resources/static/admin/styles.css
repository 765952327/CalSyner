:root{--brand:#1E40AF;--brand-2:#3B82F6;--text:#0f172a;--muted:#64748b;--border:#e5e7eb;--bg:#f8fafc;--surface:#ffffff;--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--info:#0ea5e9}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;color:var(--text);background:var(--bg)}
.container{max-width:1200px;margin:24px auto;padding:0 16px}
.layout{display:grid;grid-template-columns:240px 1fr;gap:16px}
.sidebar{border:1px solid var(--border);border-radius:12px;background:var(--surface);padding:12px;box-shadow:0 1px 2px rgba(0,0,0,.05);position:sticky;top:16px;height:calc(100vh - 32px)}
.sidebar .brand{display:flex;align-items:center;gap:8px;padding:8px 10px;border-bottom:1px solid var(--border);margin-bottom:8px}
.sidebar .brand span{font-weight:600;color:var(--brand)}
.side-nav{display:flex;flex-direction:column}
.side-nav a{color:var(--text);text-decoration:none;padding:10px 12px;border-radius:8px;margin:4px 0;display:flex;align-items:center;gap:8px}
.side-nav a:hover{background:#eef2ff}
.side-nav a.active{background:#1e3a8a;color:#fff}
header.app{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
header.app h1{font-size:22px;margin:0}
nav.app a{color:var(--brand);text-decoration:none;margin-right:8px;padding:8px 10px;border-radius:8px}
nav.app a:hover{background:#eef2ff}
.section-card{border:1px solid var(--border);border-radius:18px;background:var(--surface);padding:24px;margin-bottom:20px}
.section-card h3{margin:0 0 14px;font-size:20px}
.section-card.tool{background:linear-gradient(135deg,#eef2ff,#ffffff);border-color:#3b82f6}
.section-card.tool .card-header{margin:-8px -8px 0 -8px;padding:8px;border-bottom:1px dashed var(--border);border-radius:12px}
.section-card.tool .card-header .title .name{color:#1e3a8a}
.section-card.tool .toolbar select{min-width:160px}
#chartTools{align-items:center}
#chartTools select{height:36px;border-radius:8px}
#chartTools .icon-btn{width:36px;height:36px;padding:0}
#chartTools .refresh-btn{background:#fff;color:var(--brand-2);border:1px solid var(--brand-2);border-radius:999px;box-shadow:0 1px 2px rgba(59,130,246,.25);transition:transform .2s,box-shadow .2s,background .2s,color .2s}
#chartTools .refresh-btn:hover{background:var(--brand-2);color:#fff;box-shadow:0 3px 8px rgba(59,130,246,.35);transform:translateY(-1px)}
#chartTools .refresh-btn:active{transform:translateY(0)}
@keyframes spin{to{transform:rotate(360deg)}}
#chartTools .refresh-btn.spinning svg{animation:spin .6s linear}
.actions-bar{display:flex;gap:10px;justify-content:flex-end}
.btn-lg{padding:10px 16px;border-radius:10px;font-size:14px}
.grid{display:grid;gap:16px;align-items:stretch}
.grid.cols-1{grid-template-columns:1fr}
.grid.cols-2{grid-template-columns:repeat(2,1fr)}
.grid.cols-3{grid-template-columns:repeat(3,1fr)}
.grid.cols-auto{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));grid-auto-rows:minmax(160px,auto)}
.section{margin:24px 0}
.charts{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
.chart{border:1px solid var(--border);border-radius:12px;background:var(--surface);padding:12px;box-shadow:0 1px 2px rgba(0,0,0,.05)}
.chart h3{margin:0 0 8px}
.chart svg{width:100%;height:220px}
.chart svg{opacity:0;transform:translateY(6px);animation:fadeIn .3s ease forwards}
.charts .chart{transition:box-shadow .2s}
.charts .chart:hover{box-shadow:0 2px 12px rgba(0,0,0,.08)}
.chart text.val{font-size:10px;fill:#334155}
.bar-success{fill:var(--success)}
.bar-failed{fill:var(--danger)}
.bar-partial{fill:var(--warning)}
.bar-running{fill:var(--info)}
.axis{stroke:#94a3b8;stroke-width:1}
.line{stroke:var(--brand-2);stroke-width:2;fill:none}
.dot{fill:var(--brand-2)}
@keyframes fadeIn{to{opacity:1;transform:translateY(0)}}
.legend{display:flex;gap:12px;align-items:center;margin-top:8px;flex-wrap:wrap}
.legend .item{display:inline-flex;align-items:center;gap:6px;color:#334155}
.legend .swatch{width:10px;height:10px;border-radius:2px}
.sw-success{background:var(--success)}
.sw-failed{background:var(--danger)}
.sw-partial{background:var(--warning)}
.sw-running{background:var(--info)}
.donut-seg{fill:none;stroke-linecap:butt}
.donut-success{stroke:var(--success)}
.donut-failed{stroke:var(--danger)}
.donut-partial{stroke:var(--warning)}
.donut-running{stroke:var(--info)}
.card{border:1px solid var(--border);border-radius:12px;background:var(--surface);padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.05)}

.card h3{margin-top:0}
.card.kpi{position:relative;background:linear-gradient(180deg,#ffffff 0%,#f8fafc 100%);transition:transform .2s,box-shadow .2s}
.card.kpi::before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--brand-2);opacity:.6}
.card.kpi:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.08)}
.card.kpi.accent-success::before{background:var(--success)}
.card.kpi.accent-warning::before{background:var(--warning)}
.card.kpi.accent-info::before{background:var(--info)}
.card.kpi.accent-failed::before{background:var(--danger)}
.card.kpi.accent-success .value{color:var(--success)}
.card.kpi.accent-warning .value{color:var(--warning)}
.card.kpi.accent-info .value{color:var(--brand-2)}
.card.kpi.accent-failed .value{color:var(--danger)}
.card.svc{padding:18px;border-radius:16px}
.card.svc:hover{box-shadow:0 3px 12px rgba(0,0,0,.06);transition:box-shadow .2s}
.card.svc.t-radicale{background:linear-gradient(135deg,#ecfeff,#ffffff);border-color:#06b6d4}
.card.svc.t-jira{background:linear-gradient(135deg,#eff6ff,#ffffff);border-color:#3b82f6}
.card.svc.t-custom{background:linear-gradient(135deg,#fdf4ff,#ffffff);border-color:#a78bfa}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.card-header .title{display:flex;align-items:center;gap:10px}
.card-header .title .name{font-weight:600;font-size:18px}
.card-header .subtitle{color:var(--muted);font-size:12px;margin-top:4px}
.card-body .row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:8px}
.muted{color:var(--muted)}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.card-header .title{display:flex;align-items:center;gap:8px}
.card-header .title .name{font-weight:600}
.card-body .row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:8px}
.kpi{display:grid;grid-template-columns:1fr auto;align-items:center}
.kpi .label{color:var(--muted)}
.kpi .value{font-size:24px;font-weight:600}
.kpi .value{line-height:1}
.kpi .trend{font-size:12px;color:var(--muted)}
.card.kpi{height:100%;display:flex;flex-direction:column;min-height:120px}
.card.kpi .value{margin-top:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
table{width:100%;border-collapse:collapse;background:var(--surface)}
thead th{position:sticky;top:0;background:#f1f5f9}
th,td{border:1px solid var(--border);padding:10px;text-align:left}
tbody tr:nth-child(odd){background:#fcfdff}
tbody tr:hover{background:#f6fafe}
input,select,textarea{padding:10px;border:1px solid var(--border);border-radius:8px;width:100%;background:#fff}
.btn{display:inline-block;background:var(--brand);color:#fff;border:none;border-radius:8px;padding:8px 12px;cursor:pointer}
.btn:hover{filter:brightness(1.05)}
.btn-outline{background:#fff;color:var(--brand);border:1px solid var(--brand);border-radius:8px;padding:8px 12px;cursor:pointer}
.btn-outline:hover{background:#eef2ff}
.btn-danger{background:var(--danger)}
.btn-success{background:var(--success)}
.btn-warning{background:var(--warning)}
.btn-info{background:var(--info)}
.btn:focus-visible{outline:2px solid var(--brand-2);outline-offset:2px}
.badge{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:#eef2ff;color:#1e293b;font-weight:600}
.badge.type{background:#f1f5f9;color:#334155}
.badge.success{background:#ecfdf5;color:#064e3b}
.badge.failed{background:#fee2e2;color:#7f1d1d}
.badge.partial{background:#fffbeb;color:#78350f}
.badge.running{background:#e0f2fe;color:#0c4a6e}
.badge.skip{background:#f1f5f9;color:#334155}
.badge.enabled{background:#ecfdf5;color:#065f46;border-color:#10b981}
.badge.disabled{background:#f1f5f9;color:#334155;border-color:#e5e7eb}
.toolbar{display:flex;gap:8px;align-items:center}
.toolbar .spacer{flex:1}
.section-title{margin:0 0 10px}
.toast{position:fixed;right:16px;bottom:16px;background:#111;color:#fff;padding:10px 12px;border-radius:8px;opacity:0;transform:translateY(8px);transition:all .2s}
.toast.show{opacity:1;transform:translateY(0)}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:8px}
.toolbar .icon-btn{width:auto;height:auto;padding:6px 10px}
.side-icon{display:inline-flex}
.icon{width:16px;height:16px}
.icon-sm{width:18px;height:18px}
.icon-md{width:20px;height:20px}
.icon-lg{width:24px;height:24px}
.side-nav svg{width:18px;height:18px}
.icon-success{color:var(--success)}
.icon-failed{color:var(--danger)}
.icon-partial{color:var(--warning)}
.icon-running{color:var(--info)}
.kpi .label svg{margin-right:6px;color:var(--brand-2)}
.side-label{font-size:14px}
.icon-btn .icon{width:22px;height:22px}
.icon-btn{position:relative}
.icon-btn:hover::after{content:attr(title);position:absolute;top:100%;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:4px 8px;border-radius:6px;white-space:nowrap;font-size:12px;box-shadow:0 2px 8px rgba(0,0,0,.2);margin-top:6px;z-index:10}
.icon-btn:hover::before{content:"";position:absolute;top:calc(100% + 2px);left:50%;transform:translateX(-50%);border:6px solid transparent;border-bottom-color:#111}

/* Hero */
.hero{border:1px solid var(--border);border-radius:16px;background:var(--surface);padding:16px 18px;margin-bottom:16px}
.hero .title{font-size:22px;font-weight:600;margin:0}
.hero .desc{color:var(--muted);margin-top:4px}
.hero .desc + .desc{margin-top:12px}
.hero .title{display:flex;align-items:center;gap:10px}
.hero.s-success{background:linear-gradient(135deg,#ecfdf5,#ffffff);border-color:var(--success)}
.hero.s-failed{background:linear-gradient(135deg,#fee2e2,#ffffff);border-color:var(--danger)}
.hero.s-partial{background:linear-gradient(135deg,#fffbeb,#ffffff);border-color:var(--warning)}
.hero.s-running{background:linear-gradient(135deg,#e0f2fe,#ffffff);border-color:var(--info)}
.hero.e-enabled{background:linear-gradient(135deg,#ecfdf5,#ffffff);border-color:var(--success)}
.hero.e-disabled{background:linear-gradient(135deg,#f1f5f9,#ffffff);border-color:var(--border)}
.type-icon{width:30px;height:30px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center}
.hero.t-radicale{background:linear-gradient(135deg,#ecfeff,#ffffff);border-color:#06b6d4}
.hero.t-jira{background:linear-gradient(135deg,#eff6ff,#ffffff);border-color:#3b82f6}
.hero.t-custom{background:linear-gradient(135deg,#fdf4ff,#ffffff);border-color:#a78bfa}
.hero.t-radicale .type-icon{background:#06b6d4;color:#fff}
.hero.t-jira .type-icon{background:#3b82f6;color:#fff}
.hero.t-custom .type-icon{background:#a78bfa;color:#fff}
.badge.type.jira{background:#eff6ff;color:#1e3a8a;border-color:#3b82f6}
.badge.type.radicale{background:#ecfeff;color:#0e7490;border-color:#06b6d4}
.ops{display:flex;gap:6px;flex-wrap:nowrap;align-items:center}
td.ops{white-space:nowrap}
.empty{display:flex;align-items:center;justify-content:center;gap:10px;padding:24px;color:var(--muted)}
.empty svg{width:24px;height:24px;color:var(--brand-2)}
.card pre{padding:12px;background:#f8fafc;color:#334155;border-radius:8px;border:1px solid var(--border);max-height:260px;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:12px}
.section-card .row{display:grid;grid-template-columns:1fr;gap:20px;margin-top:16px}
.span-2{grid-column:span 2}
.form-item{display:flex;flex-direction:column}
.form-item label{font-weight:600;color:var(--muted);margin-bottom:8px}
.form-item input,.form-item select{padding:12px;font-size:14px}
.help{font-size:12px;color:var(--muted);margin-top:6px}
.card.filter{padding:12px}
.card.filter{margin-bottom:12px}
.grid.cols-2{gap:20px}
.grid.cols-2 > div{display:flex;flex-direction:column;gap:12px}
.filter-bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.filter-bar input{max-width:260px}
.filter-bar select{max-width:160px}
.filter-bar.vstack{flex-direction:column;align-items:stretch}
.filter-bar.vstack input,.filter-bar.vstack select{max-width:none;width:100%}
.filter-bar.vstack .btn{align-self:flex-start}
.sync-map{display:grid;grid-template-columns:1fr 70px 1fr;gap:14px;align-items:start;margin-top:10px}
.sync-map.vstack{display:flex;flex-direction:column;align-items:stretch;gap:16px}
.sync-col{display:flex;flex-direction:column;gap:10px}
.sync-col .filter-bar{gap:10px;flex-wrap:wrap}
.sync-arrow{display:flex;align-items:center;justify-content:center;width:70px;height:70px;border-radius:999px;border:1px dashed var(--brand-2);color:var(--brand-2);background:#fff;font-size:22px;font-weight:700;box-shadow:0 1px 2px rgba(59,130,246,.2)}
.sync-action{display:flex;flex-direction:column;align-items:center;gap:10px}
.map-actions{justify-content:center;margin-top:6px}
#mapExpr{flex:1;max-width:none;width:100%;padding:14px;font-size:15px}
.web-frame{width:100%;height:640px;border:1px solid var(--border);border-radius:12px;background:#fff}
